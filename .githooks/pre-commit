#!/usr/bin/env bash

# Ensure build metadata is up to date before committing.
set -euo pipefail

repo_root="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
cd "$repo_root"

if command -v node >/dev/null 2>&1; then
  node scripts/write-version.js
  if [ -f backend/version.gs ]; then
    git add backend/version.gs
  fi
else
  echo "warning: Node.js not found; skipping version metadata generation" >&2
fi
