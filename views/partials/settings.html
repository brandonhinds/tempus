<section class="ts-card" id="page-settings">
 <div class="ts-row">
  <div class="ts-col">
   <h3 style="margin-top:0;">
    Settings
   </h3>
   <div class="ts-toolbar" id="settings-section-collapse-controls" style="display:none; margin:12px 0;">
    <div class="ts-note" style="margin:0;">
     Expand or collapse all sections to scan settings quickly.
    </div>
    <div style="display:flex; gap:8px;">
     <button class="ghost small" id="btn-expand-all-settings-sections">
      Expand all
     </button>
     <button class="ghost small" id="btn-collapse-all-settings-sections">
      Collapse all
     </button>
    </div>
   </div>
   <div id="settings-section-list">
   </div>
   <div id="settings-field-templates" style="display:none;">
    <div class="ts-settings-item" data-setting-key="round_to_nearest">
     <label class="ts-settings-label" for="set-round">
      Time entries rounding (minutes)
     </label>
     <div class="ts-note">
      Time entries are automatically rounded to intervals of this many minutes (0-60). Enter 0 to disable rounding entirely.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-round" min="0" max="60" step="1" type="number"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="theme">
     <label class="ts-settings-label" for="set-theme">
      Theme
     </label>
     <div class="ts-note">
      The colour scheme of Tempus.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <div style="display: flex; gap: 8px; align-items: stretch;">
       <select id="set-theme" style="flex: 1;">
        <option value="dark">
         Dark
        </option>
        <option value="light">
         Light
        </option>
        <option value="og">
         The OG
        </option>
        <option value="rose">
         Rose Gold
        </option>
        <option value="sierra117">
         Sierra 117
        </option>
        <option class="ts-colorblind-theme" style="display:none;" value="protanopia">
         Protanopia Friendly
        </option>
        <option class="ts-colorblind-theme" style="display:none;" value="deuteranopia">
         Deuteranopia Friendly
        </option>
        <option class="ts-colorblind-theme" style="display:none;" value="tritanopia">
         Tritanopia Friendly
        </option>
        <option class="ts-colorblind-theme" style="display:none;" value="monochrome">
         Monochrome
        </option>
        <option class="ts-custom-theme" style="display:none;" value="custom">
         Custom
        </option>
       </select>
       <button class="secondary" id="btn-configure-theme" style="display:none; white-space: nowrap;" type="button">
        Configure
       </button>
      </div>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="status_notification_mode">
     <label class="ts-settings-label" for="set-status-notifications">
      Status notifications
     </label>
     <div class="ts-note">
      How progress, warnings, and errors are reported.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <select id="set-status-notifications">
       <option value="status_bar">
        Status bar only
       </option>
       <option value="toast">
        Toast notifications only
       </option>
       <option value="both">
        Both toast and status bar
       </option>
      </select>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="lost_super_recovery_mode" id="lost-super-recovery-col">
     <label class="ts-settings-label" for="set-lost-super-recovery-mode">
      Lost super recovery method
      <span class="ts-info-icon" title="How the superannuation normally lost to deductions being reclaimed. Options include adding the amount back to superannuation as an extra contribution, or adding it to income so it flows through tax and net income.">
       i
      </span>
     </label>
     <div class="ts-note">
      How the superannuation normally lost to deductions being reclaimed. Options include adding the amount directly back to superannuation as an extra contribution, or having the money added back as additional income so it gets distributed between superannuation, tax, and net income.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <select id="set-lost-super-recovery-mode">
       <option value="extra_contribution">
        Add as extra super contribution
       </option>
       <option value="add_to_taxable">
        Add back to taxable income
       </option>
      </select>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="payg_instalment_rate" id="payg-rate-col">
     <label class="ts-settings-label" for="set-payg-rate">
      PAYG instalment rate (%)
     </label>
     <div class="ts-note">
      Enter the rate from your ATO instalment notice so Tempus can estimate quarterly BAS repayments.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-payg-rate" max="100" min="0" step="0.1" type="number"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="public_holiday_state" id="public-holiday-state-col">
     <label class="ts-settings-label" for="set-public-holiday-state">
      Public holidays state/territory
     </label>
     <div class="ts-note">
      The Australian state or territory you observe the public holidays for.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <select id="set-public-holiday-state">
       <option value="ACT">
        Australian Capital Territory
       </option>
       <option value="NSW">
        New South Wales
       </option>
       <option value="NT">
        Northern Territory
       </option>
       <option value="QLD">
        Queensland
       </option>
       <option value="SA">
        South Australia
       </option>
       <option value="TAS">
        Tasmania
       </option>
       <option value="VIC">
        Victoria
       </option>
       <option value="WA">
        Western Australia
       </option>
      </select>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="minimum_end_time" id="minimum-end-time-col">
     <label class="ts-settings-label" for="set-minimum-end-time">
      Suggested minimum end time
     </label>
     <div class="ts-note">
      The minimum time of the day you aim to leave at. Uses this value and the time entry rounding to recommend when you should leave for the day to round out your hours.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-minimum-end-time" type="time"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="monthly_insights_trend_method" id="monthly-insights-trend-method-col">
     <label class="ts-settings-label" for="set-monthly-insights-trend-method">
      Monthly insights trend calculation
     </label>
     <div class="ts-note">
      Choose how the projected variance badge calculates your average hours per day for trend projection.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <select id="set-monthly-insights-trend-method">
       <option value="standard_contract_hours">
        Standard contract hours
       </option>
       <option value="current_month">
        Average hours per day of current month
       </option>
       <option value="last_3_months">
        Average hours per day of last 3 months
       </option>
       <option value="contract_lifetime">
        Average hours per day over contract lifetime
       </option>
       <option value="same_month_last_year">
        Average hours per day in this month last year
       </option>
      </select>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="projections_variance_value" id="projections-variance-value-col">
     <label class="ts-settings-label" for="set-projections-variance-value">
      Projections variance badge value
     </label>
     <div class="ts-note">
      Decide which comparison drives the Projected variance badge.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <select id="set-projections-variance-value">
       <option value="monthly_capacity">
        Monthly capacity based on available business days
       </option>
       <option value="contract_pace">
        Contract monthly average capacity
       </option>
       <option value="projected_vs_contract">
        Projected difference with target contract average
       </option>
       <option value="projected_vs_standard">
        Projected difference with target available business days
       </option>
      </select>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="invoice_template_reference" id="invoice-template-col">
     <label class="ts-settings-label" for="set-invoice-template">
      Invoice template (Doc ID or path)
     </label>
     <div class="ts-note">
      The Google Docs template (by ID or Drive path) that new invoices copy before populating invoices.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-invoice-template" placeholder="Document ID or path" type="text"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="invoice_output_folder_path" id="invoice-output-folder-col">
     <label class="ts-settings-label" for="set-invoice-output-folder">
      Invoice output folder path
     </label>
     <div class="ts-note">
      Path in Google Drive where generated invoices should be stored.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-invoice-output-folder" placeholder="Folder path" type="text"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="invoice_line_item_limit" id="invoice-line-limit-col">
     <label class="ts-settings-label" for="set-invoice-line-limit">
      Invoice line placeholder limit
     </label>
     <div class="ts-note">
      The maximum number of invoice lines in your invoice template, which ensures generated invoices don't exceed it.
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-invoice-line-limit" min="1" step="1" type="number"/>
     </div>
    </div>
    <div class="ts-settings-item" data-setting-key="invoice_hours_label" id="invoice-hours-label-col">
     <label class="ts-settings-label" for="set-invoice-hours-label">
      Hours field label
     </label>
     <div class="ts-note">
      Customize the label for the hours field on invoices (e.g., "Hours", "Reports", "Assessments").
     </div>
     <div class="ts-settings-field ts-settings-control">
      <input id="set-invoice-hours-label" placeholder="Hours" type="text"/>
     </div>
    </div>
   </div>
   <div style="margin-top:8px; text-align:right; display:flex; justify-content:flex-end; align-items:center; gap:8px;">
    <div style="display:flex; gap:8px;">
     <button class="ghost" id="btn-discard-settings" style="display:none;">
      Discard Changes
     </button>
     <button disabled="" id="btn-save-settings">
      Save Settings
     </button>
    </div>
   </div>
   <div style="margin-top:32px;">
    <h3 style="margin:0 0 12px;">
     Feature Flags
    </h3>
    <div class="ts-note">
     Toggle experimental capabilities without impacting core time tracking.
    </div>
    <div class="ts-toolbar" id="feature-flag-collapse-controls" style="display:none; margin:12px 0;">
     <div class="ts-note" style="margin:0;">
      Expand or collapse all groups to scan feature toggles quickly.
     </div>
     <div style="display:flex; gap:8px;">
      <button class="ghost small" id="btn-expand-all-feature-flags">
       Expand all
      </button>
      <button class="ghost small" id="btn-collapse-all-feature-flags">
       Collapse all
      </button>
     </div>
    </div>
    <div id="feature-flags-list" style="margin-top:12px;">
    </div>
    <div id="actions-after-flags" style="margin-top:16px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
     <button class="secondary" id="btn-super-guarantee-rates" style="white-space: nowrap;" type="button">
      Super Guarantee Percentages
     </button>
     <div id="clear-cache-wrapper" style="display:none;">
      <button class="danger" id="btn-clear-cache">
       Clear Local Cache
      </button>
     </div>
    </div>
   </div>
  </div>
 </div>
</section>
<!-- Custom Theme Configuration Modal -->
<div class="ts-modal" id="modal-custom-theme" style="display:none;">
 <div class="ts-modal-content">
  <div class="ts-modal-header">
   <h3>
    Configure Custom Theme
   </h3>
   <button class="ts-modal-close">
    ×
   </button>
  </div>
  <div class="ts-modal-body">
   <div class="ts-note" style="margin-bottom: 16px;">
    Choose your main colors and the theme will automatically generate complementary shades for the entire interface.
   </div>
  <div class="ts-row" style="margin-bottom: 16px;">
    <div class="ts-col">
     <label>
      Background Color
     </label>
     <input id="custom-theme-bg" type="color" value="#0b1220"/>
     <div class="ts-note">
      Base colour for the app background
     </div>
    </div>
    <div class="ts-col">
     <label>
      Surface Color
     </label>
     <input id="custom-theme-panel" type="color" value="#111d33"/>
     <div class="ts-note">
      Panels, cards, and modals use this surface shade
     </div>
   </div>
  </div>
  <div class="ts-row" style="margin-bottom: 16px;">
    <div class="ts-col">
     <label>
      Primary Color
     </label>
     <input id="custom-theme-primary" type="color" value="#3b82f6"/>
     <div class="ts-note">
      Main accent for buttons and key highlights
     </div>
    </div>
    <div class="ts-col">
     <label>
      Success Color
     </label>
     <input id="custom-theme-success" type="color" value="#22c55e"/>
     <div class="ts-note">
      Positive statuses and success indicators
     </div>
    </div>
   </div>
  <div class="ts-row">
    <div class="ts-col">
     <label>
      Warning Color
     </label>
     <input id="custom-theme-warning" type="color" value="#fbbf24"/>
     <div class="ts-note">
      Caution banners, badges, and hour type alerts
     </div>
    </div>
    <div class="ts-col">
     <label>
      Danger Color
     </label>
     <input id="custom-theme-danger" type="color" value="#ef4444"/>
     <div class="ts-note">
      Destructive actions and critical alerts
     </div>
    </div>
   </div>
  <div class="ts-row">
    <div class="ts-col">
     <label>
      Text Color
     </label>
     <input id="custom-theme-text" type="color" value="#e8edf7"/>
     <div class="ts-note">
      Primary text against the background and surfaces
     </div>
    </div>
    <div class="ts-col">
     <label>
      Muted Text Color
     </label>
     <input id="custom-theme-muted" type="color" value="#a4b5d6"/>
     <div class="ts-note">
      Secondary labels and helper text
     </div>
    </div>
   </div>
   <div class="ts-note" id="custom-theme-validation" style="display:none; margin-top: 16px;">
   </div>
   <div class="ts-custom-theme-preview" id="custom-theme-preview">
    <div class="ts-custom-theme-preview__panel">
     <h4 style="margin:0;">
      Theme preview
     </h4>
     <p style="margin:0;">
      Headlines, body text, and helper copy reflect your palette choices.
     </p>
     <div class="ts-custom-theme-preview__buttons">
      <button type="button">
       Primary action
      </button>
      <button class="secondary" type="button">
       Secondary
      </button>
      <button class="outline" type="button">
       Outline
      </button>
     </div>
     <div class="ts-custom-theme-preview__badges">
      <span class="ts-custom-theme-preview__badge success">
       Success
      </span>
      <span class="ts-custom-theme-preview__badge warn">
       Warning
      </span>
      <span class="ts-custom-theme-preview__badge danger">
       Danger
      </span>
     </div>
     <div class="ts-custom-theme-preview__calendar">
      <div class="ts-custom-theme-preview__calendar-day">
       12
      </div>
      <div class="ts-custom-theme-preview__calendar-day ts-custom-theme-preview__calendar-day--selected">
       13
      </div>
      <div class="ts-custom-theme-preview__calendar-day">
       14
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="ts-modal-footer">
   <button class="ghost" id="btn-cancel-custom-theme">
    Cancel
   </button>
   <button id="btn-save-custom-theme">
    Save Theme
   </button>
  </div>
 </div>
</div>
<!-- Super Guarantee Rates Modal -->
<div class="ts-modal" id="modal-super-guarantee-rates" style="display:none;">
 <div class="ts-modal-content" style="max-width:800px;">
  <div class="ts-modal-header">
   <h3>
    Super Guarantee Percentages
   </h3>
   <button class="ts-modal-close">
    ×
   </button>
  </div>
  <div class="ts-modal-body">
   <div class="ts-note" style="margin-bottom: 16px;">
    Manage superannuation guarantee rates by date range. Rates are sorted by start date with the most recent at the top.
    <strong>
     Warning:
    </strong>
    Only one rate should have no end date (the current rate).
   </div>
   <div style="margin-bottom:12px;">
    <button class="secondary" id="btn-add-super-rate" type="button">
     Add Rate
    </button>
   </div>
   <div style="display:grid; grid-template-columns: auto 1fr 1fr 1fr auto; gap:8px; padding:8px; font-weight:600; border-bottom:2px solid var(--border-color);">
    <span>
    </span>
    <span>
     Start Date
    </span>
    <span>
     End Date
    </span>
    <span>
     Percentage (%)
    </span>
    <span>
    </span>
   </div>
   <div id="super-rates-list" style="display:flex; flex-direction:column; gap:8px; margin-top:8px;">
    <!-- Rates will be rendered here -->
   </div>
  </div>
  <div class="ts-modal-footer">
   <button class="ghost" id="btn-cancel-super-rates">
    Cancel
   </button>
   <button id="btn-save-super-rates">
    Save Rates
   </button>
  </div>
 </div>
</div>
