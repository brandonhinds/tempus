<section class="ts-card" id="page-settings">
  <div class="ts-row">
    <div class="ts-col">
      <h3 style="margin-top:0;">Settings</h3>
      <div class="ts-settings-grid">
        <div>
          <label>Round to Nearest (minutes)</label>
          <input type="number" id="set-round" min="0" step="1" />
        </div>
        <div>
          <label>Theme</label>
          <div style="display: flex; gap: 8px; align-items: stretch;">
            <select id="set-theme" style="flex: 1;">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
              <option value="og">The OG</option>
              <option value="rose">Rose Gold</option>
              <option value="sierra117">Sierra 117</option>
              <option value="protanopia" class="ts-colorblind-theme" style="display:none;">Protanopia Friendly</option>
              <option value="deuteranopia" class="ts-colorblind-theme" style="display:none;">Deuteranopia Friendly</option>
              <option value="tritanopia" class="ts-colorblind-theme" style="display:none;">Tritanopia Friendly</option>
              <option value="monochrome" class="ts-colorblind-theme" style="display:none;">Monochrome</option>
              <option value="custom" class="ts-custom-theme" style="display:none;">Custom</option>
            </select>
            <button type="button" id="btn-configure-theme" class="secondary" style="display:none; white-space: nowrap;">Configure</button>
          </div>
        </div>
        <div>
          <label>Superannuation rate (%)</label>
          <input type="number" id="set-super-rate" min="0" step="0.1" />
        </div>
        <div id="payg-rate-col" style="display:none;">
          <label>PAYG Instalment rate (%)</label>
          <input type="number" id="set-payg-rate" min="0" max="100" step="0.1" />
        </div>
        <div id="public-holiday-state-col" style="display:none;">
          <label>State/Territory</label>
          <select id="set-public-holiday-state">
            <option value="ACT">Australian Capital Territory</option>
            <option value="NSW">New South Wales</option>
            <option value="NT">Northern Territory</option>
            <option value="QLD">Queensland</option>
            <option value="SA">South Australia</option>
            <option value="TAS">Tasmania</option>
            <option value="VIC">Victoria</option>
            <option value="WA">Western Australia</option>
          </select>
        </div>
        <div id="minimum-end-time-col" style="display:none;">
          <label>Minimum End Time</label>
          <input type="time" id="set-minimum-end-time" />
        </div>
      </div>
      <div style="margin-top:8px; text-align:right; display:flex; justify-content:flex-end; gap:8px;">
        <button class="ghost" id="btn-discard-settings" style="display:none;">Discard Changes</button>
        <button id="btn-save-settings" disabled>Save Settings</button>
      </div>
      <div style="margin-top:32px;">
        <h3 style="margin:0 0 12px;">Feature Flags</h3>
        <div class="ts-note">Toggle experimental capabilities without impacting core time tracking.</div>
        <div id="feature-flags-list" style="margin-top:12px;"></div>
        <div id="clear-cache-wrapper" style="margin-top:16px; display:none;">
          <button class="danger" id="btn-clear-cache">Clear Local Cache</button>
          <div class="ts-note">Removes cached entries, settings, and remembered pages from this browser.</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Custom Theme Configuration Modal -->
<div class="ts-modal" id="modal-custom-theme" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Configure Custom Theme</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-note" style="margin-bottom: 16px;">Choose your main colors and the theme will automatically generate complementary shades for the entire interface.</div>
      <div class="ts-row" style="margin-bottom: 16px;">
        <div class="ts-col">
          <label>Background Color</label>
          <input type="color" id="custom-theme-bg" value="#0b1220" />
          <div class="ts-note">Dark base color for the app background</div>
        </div>
        <div class="ts-col">
          <label>Primary Color</label>
          <input type="color" id="custom-theme-primary" value="#3b82f6" />
          <div class="ts-note">Main accent color for buttons and highlights</div>
        </div>
      </div>
      <div class="ts-row">
        <div class="ts-col">
          <label>Text Color</label>
          <input type="color" id="custom-theme-text" value="#e2e8f0" />
          <div class="ts-note">Main text color for readability</div>
        </div>
        <div class="ts-col">
          <label>Success Color</label>
          <input type="color" id="custom-theme-success" value="#10b981" />
          <div class="ts-note">Color for success states and positive indicators</div>
        </div>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-custom-theme">Cancel</button>
      <button id="btn-save-custom-theme">Save Theme</button>
    </div>
  </div>
</div>
