<section class="ts-card" id="page-deductions" style="display:none;">
  <div class="ts-toolbar" style="margin-bottom:12px;">
    <div style="display:flex; align-items:center; gap:12px;">
      <h3 style="margin:0;">Income Deductions</h3>
      <span class="ts-note" id="deduction-company-disabled-note" style="display:none;">Company tracking disabled — company deductions read-only.</span>
    </div>
    <button id="btn-add-deduction">Add deduction</button>
  </div>
  <div class="ts-note" style="margin-bottom:12px;">Configure salary sacrifice items, company deductions, and extra super contributions. Recurring deductions display the next five run dates for confirmation.</div>
  <div id="deductions-empty" class="ts-note" style="display:none;">No deductions configured yet.</div>
  <div class="ts-list" id="deductions-list"></div>
</section>

<div class="ts-modal" id="modal-deduction-form" style="display:none;">
  <div class="ts-modal-content" style="max-width:720px;">
    <div class="ts-modal-header">
      <h3 id="deduction-form-title">Add deduction</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-row" style="margin-top:0;">
        <div class="ts-col">
          <label for="deduction-name">Name</label>
          <input id="deduction-name" placeholder="e.g. Novated lease" />
        </div>
        <div class="ts-col" style="max-width:220px;">
          <label for="deduction-category">Category</label>
          <select id="deduction-category">
            <option value="personal">Salary sacrifice</option>
            <option value="company">Company expense</option>
          </select>
          <input id="deduction-category-readonly" value="Salary sacrifice" readonly style="display:none;" />
        </div>
        <div class="ts-col" style="max-width:220px;">
          <label for="deduction-type">Type</label>
          <select id="deduction-type">
            <option value="standard">Standard deduction</option>
            <option value="extra_super">Extra super contribution</option>
          </select>
        </div>
      </div>
      <div class="ts-row" style="margin-top:12px;">
        <div class="ts-col" id="deduction-amount-wrapper" style="max-width:220px;">
          <label for="deduction-amount">Amount</label>
          <input type="number" id="deduction-amount" min="0" step="0.01" />
        </div>
        <div class="ts-col" id="deduction-percent-wrapper" style="max-width:220px; display:none;">
          <label for="deduction-percent">Percentage of gross income</label>
          <input type="number" id="deduction-percent" min="0" max="100" step="0.1" placeholder="e.g. 2" />
        </div>
        <div class="ts-col" id="deduction-amount-mode-wrapper" style="max-width:220px; display:none;">
          <label for="deduction-amount-mode">Calculation</label>
          <select id="deduction-amount-mode">
            <option value="flat">Flat amount</option>
            <option value="percent">Percentage of gross income</option>
          </select>
        </div>
        <div class="ts-col" id="deduction-gst-wrapper" style="max-width:220px; display:flex; flex-direction:column; align-items:center;">
          <label for="deduction-gst" style="margin-bottom:4px;">Amount includes GST?</label>
          <label class="ts-toggle">
            <input type="checkbox" id="deduction-gst" />
            <span class="ts-toggle-track"><span class="ts-toggle-thumb"></span></span>
          </label>
        </div>
      </div>
      <div id="deduction-company-gst-note" class="ts-note" style="margin-top:4px; display:none;">GST component is tracked automatically for company deductions.</div>
      <div class="ts-row" style="margin-top:12px;">
        <div class="ts-col" style="max-width:220px;">
          <label for="deduction-frequency">Frequency</label>
          <select id="deduction-frequency">
            <option value="once">One-off</option>
            <option value="weekly">Weekly</option>
            <option value="fortnightly">Fortnightly</option>
            <option value="monthly">Monthly</option>
            <option value="quarterly">Quarterly</option>
            <option value="yearly">Yearly</option>
          </select>
        </div>
        <div class="ts-col" style="max-width:220px;">
          <label for="deduction-start-date">Start date</label>
          <input type="date" id="deduction-start-date" />
        </div>
        <div class="ts-col" style="max-width:220px;" id="deduction-end-date-wrapper">
          <label for="deduction-end-date">End date (optional)</label>
          <input type="date" id="deduction-end-date" />
        </div>
      </div>
      <div class="ts-note" id="deduction-occurrence-preview" style="margin-top:8px;">&nbsp;</div>
      <div class="ts-row" style="margin-top:12px;">
        <div class="ts-col">
          <label for="deduction-notes">Notes (optional)</label>
          <textarea id="deduction-notes" rows="3" placeholder="Add context for this deduction"></textarea>
        </div>
      </div>
      <div class="ts-note" style="margin-top:12px;">Need to store documents for this deduction? We’ll add file attachments soon.</div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-deduction">Cancel</button>
      <button id="btn-save-deduction">Save deduction</button>
    </div>
  </div>
</div>
