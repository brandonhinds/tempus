<section class="ts-card" id="page-about" style="display:none;">
  <div class="ts-row">
    <div class="ts-col">
      <!-- Header -->
      <div style="text-align:center; margin-bottom:var(--space-5);">
        <div style="display:inline-flex; align-items:center; justify-content:center; width:64px; height:64px; background:var(--primary); color:#fff; border-radius:16px; font-size:32px; font-weight:800; margin-bottom:var(--space-3);">
          T
        </div>
        <h2 style="margin:0 0 var(--space-1); font-size:28px;">Tempus</h2>
        <p class="ts-note" style="margin:0; opacity:1;">Professional time tracking powered by Google Sheets</p>
      </div>

      <!-- Updating Tempus -->
      <div style="margin-bottom:var(--space-5);">
        <h3 style="margin:0 0 var(--space-3);">Updating Tempus</h3>

        <!-- First-Time Setup (Collapsible) -->
        <details style="margin-bottom:var(--space-4); border:1px solid var(--border); border-radius:8px; overflow:hidden;">
          <summary style="padding:var(--space-3); background:var(--surface-subtle); cursor:pointer; font-weight:600; user-select:none; list-style:none; display:flex; align-items:center; gap:var(--space-2);">
            <span style="transition:transform 0.2s;">â–¶</span>
            <span>First-Time Setup (one-time only)</span>
          </summary>
          <div style="padding:var(--space-4); background:var(--panel);">
            <p style="margin:0 0 var(--space-3); color:var(--text); line-height:1.6;">
              If you haven't set up Tempus yet, follow these one-time steps:
            </p>

            <div style="margin-bottom:var(--space-4);">
              <p style="margin:0 0 var(--space-2); font-weight:600;">1. Install Node.js and npm (if not already installed)</p>
              <p class="ts-note" style="margin:0 0 var(--space-2); opacity:1;">
                Node.js is required to run clasp, the command-line tool that syncs code to Google Apps Script.
              </p>
              <p class="ts-note" style="margin:0 0 var(--space-2); opacity:1;">
                Download and install Node.js from <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer" style="color:var(--primary);">nodejs.org</a> (includes npm)
              </p>
              <p class="ts-note" style="margin:0; opacity:1;">
                To verify installation, run: <code style="background:var(--bg); padding:2px 6px; border-radius:4px; font-family:monospace; font-size:12px;">node --version && npm --version</code>
              </p>
            </div>

            <div style="margin-bottom:var(--space-4);">
              <p style="margin:0 0 var(--space-2); font-weight:600;">2. Install clasp (Google's command-line tool for Apps Script)</p>
              <p class="ts-note" style="margin:0 0 var(--space-2); opacity:1;">
                Clasp allows you to push code updates from your computer to your Google Apps Script project.
              </p>
              <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); margin:0 0 var(--space-2); font-family:monospace; font-size:13px; overflow-x:auto;">
                <code>npm install -g @google/clasp</code>
                <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
              </div>
              <p class="ts-note" style="margin:0; opacity:1;">
                Learn more: <a href="https://github.com/google/clasp" target="_blank" rel="noopener noreferrer" style="color:var(--primary);">github.com/google/clasp</a>
              </p>
            </div>

            <div style="margin-bottom:var(--space-4);">
              <p style="margin:0 0 var(--space-2); font-weight:600;">3. Login to clasp and connect to your Apps Script project</p>
              <p class="ts-note" style="margin:0 0 var(--space-2); opacity:1;">
                This authenticates clasp with your Google account and links it to your Tempus Apps Script project.
              </p>
              <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); margin:0 0 var(--space-2); font-family:monospace; font-size:13px; overflow-x:auto;">
                <code>clasp login<br>clasp clone <span id="script-id-display" style="color:var(--muted);">[Your Script ID]</span></code>
                <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
              </div>
              <p class="ts-note" style="margin:0; opacity:1;">
                Your Script ID: <strong id="script-id-value" style="font-family:monospace;">Loading...</strong><br>
                Find it in Apps Script under <strong>Project Settings</strong> or use the value above.
              </p>
            </div>

            <div style="margin-bottom:var(--space-4);">
              <p style="margin:0 0 var(--space-2); font-weight:600;">4. Download the Tempus repository (only needed if using Git for updates)</p>
              <p class="ts-note" style="margin:0 0 var(--space-2); opacity:1;">
                If you plan to use Git to easily pull future updates, clone the repository now. Otherwise, skip this step and download ZIP files manually when updating.
              </p>
              <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); font-family:monospace; font-size:13px; overflow-x:auto;">
                <code>git clone https://github.com/brandonhinds/tempus.git</code>
                <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
              </div>
            </div>
          </div>
        </details>

        <h4 style="margin:var(--space-4) 0 var(--space-2); font-size:15px;">Step 1: Backup Your Data</h4>
        <p style="margin:0 0 var(--space-3); color:var(--text); line-height:1.6;">
          Before updating, create a backup of your Google Sheet to protect against data corruption or breaking changes.
        </p>

        <div style="display:flex; align-items:center; gap:var(--space-3); margin-bottom:var(--space-4); padding:var(--space-3); background:var(--surface-subtle); border:1px solid var(--border); border-radius:8px;">
          <div style="flex:1;">
            <p style="margin:0; font-size:13px; line-height:1.5;">
              <strong>Automated Backup:</strong> Click to create a timestamped copy of your sheet in Google Drive.
            </p>
            <p class="ts-note" style="margin:var(--space-1) 0 0; opacity:1;">
              The backup will be saved as "Tempus Backup - [Date & Time]" in the same folder as your original sheet.
            </p>
          </div>
          <button id="backup-sheet-btn" style="flex-shrink:0;">
            Create Backup Now
          </button>
        </div>

        <h4 style="margin:var(--space-4) 0 var(--space-2); font-size:15px;">Step 2: Download and Install Latest Version</h4>

        <div class="ts-tabs">
          <button class="ts-tab-btn active" data-tab="script-update">Automated</button>
          <button class="ts-tab-btn" data-tab="manual-update">Manual</button>
          <button class="ts-tab-btn" data-tab="git-update">Git</button>
        </div>

        <div id="manual-update" class="ts-tab-content" style="margin-bottom:var(--space-4);">
          <ol style="margin:0 0 var(--space-3); padding-left:var(--space-4); line-height:1.8;">
            <li>Download the latest release ZIP: <a href="https://github.com/brandonhinds/tempus/archive/refs/heads/main.zip" target="_blank" rel="noopener noreferrer" style="color:var(--primary);">tempus-main.zip</a>.</li>
            <li>Extract the archive and open the extracted folder in your file browser.</li>
            <li>Open the Apps Script project folder you originally created with <code style="background:var(--bg); padding:2px 6px; border-radius:4px; font-family:monospace; font-size:12px;">clasp clone</code>.</li>
            <li>Delete all files inside the directory other than the <code style="background:var(--bg); padding:2px 6px; border-radius:4px; font-family:monospace; font-size:12px;">.clasp.json</code> file. If you don't see that file it is because it is hidden, in which case you can safely delete all files.</li>
            <li>Copy the contents of the freshly extracted Tempus release into the Apps Script folder. Allow the file browser to merge folders and replace files so the new sources overwrite the old ones while the hidden clasp files stay put.</li>
            <li>Open a terminal in that Apps Script folder and run <code style="background:var(--bg); padding:2px 6px; border-radius:4px; font-family:monospace; font-size:12px;">clasp push</code> to deploy the update.</li>
          </ol>
          <div class="ts-note" style="margin:var(--space-3) 0 0; opacity:1;">
            Removing the old files before copying prevents <code>.js</code> files generated by <code>clasp pull</code> from mixing with the <code>.gs</code> sources in this repository.
          </div>
        </div>

        <div id="git-update" class="ts-tab-content" style="margin-bottom:var(--space-4);">
          <p style="margin:0 0 var(--space-2); font-size:13px; color:var(--muted);">
            Recommended if you keep Tempus in Git. Make sure your working tree is clean before running these commands.
          </p>

          <ol style="margin:0 0 var(--space-3); padding-left:var(--space-4); line-height:1.8;">
            <li>Open a terminal and change into your local Tempus repository.</li>
            <li>Fetch the latest commits and reset your working tree to match <code>origin/main</code>.</li>
            <li>Remove everything except the <code>.git/</code> directory and the hidden <code>.clasp.json</code> file, then restore the tracked files from Git so no stray <code>.js</code> files remain.</li>
            <li>Run <code style="background:var(--bg); padding:2px 6px; border-radius:4px; font-family:monospace; font-size:12px;">clasp push</code>.</li>
          </ol>

          <p style="margin:0 0 var(--space-2); font-size:13px; font-weight:600;">Bash / macOS / Linux:</p>
          <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); margin:0 0 var(--space-3); font-family:monospace; font-size:13px; overflow-x:auto;">
            <code>#!/bin/bash<br>set -euo pipefail<br><br>cd /path/to/tempus<br>git fetch origin main<br>git checkout main<br>git reset --hard origin/main<br><br>shopt -s dotglob nullglob<br>for entry in ./* ./.*
do<br>&nbsp;&nbsp;name="$(basename "$entry")"<br>&nbsp;&nbsp;if [[ "$name" == "." || "$name" == ".." || "$name" == ".git" || "$name" == ".clasp.json" ]]; then<br>&nbsp;&nbsp;&nbsp;&nbsp;continue<br>&nbsp;&nbsp;fi<br>&nbsp;&nbsp;rm -rf "$entry"<br>done<br><br>git checkout -- .<br>clasp push<br>echo "Update complete! Refresh Tempus."</code>
            <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
          </div>

          <p style="margin:0 0 var(--space-2); font-size:13px; font-weight:600;">PowerShell / Windows:</p>
          <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); margin:0 0 var(--space-3); font-family:monospace; font-size:13px; overflow-x:auto;">
            <code>Set-Location C:\path\to\tempus<br>git fetch origin main<br>git checkout main<br>git reset --hard origin/main<br><br>Get-ChildItem -Force | Where-Object { $_.Name -ne '.git' -and $_.Name -ne '.clasp.json' } | ForEach-Object { Remove-Item $_.FullName -Recurse -Force }<br><br>git checkout -- .<br>clasp push<br>Write-Host "Update complete! Refresh Tempus."</code>
            <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
          </div>

          <div class="ts-note" style="margin:var(--space-3) 0 0; opacity:1;">
            <strong>Heads up:</strong> These commands permanently delete every file in the working directory apart from <code>.git/</code> and <code>.clasp.json</code>. Run <code>git status</code> first and make sure you have no local changes you still need before executing them.
          </div>
        </div>

        <div id="script-update" class="ts-tab-content active" style="margin-bottom:var(--space-4);">
          <p style="margin:0 0 var(--space-2); font-size:13px; color:var(--muted);">
            Prefer a single command? Use the bundled Bash script to clone, refresh, and push the project automatically. It runs on macOS and Linux, and Windows users can run it through <a href="https://git-scm.com/install" target="_blank" rel="noopener noreferrer" style="color:var(--primary);">Git&nbsp;Bash</a>.
          </p>
          <p style="margin:0 0 var(--space-3); color:var(--text); line-height:1.6;">
            Run the command below from any folder. It logs into Apps Script (if needed), downloads the updater, makes it executable, and pushes the latest Tempus files using the project ID linked to clasp. The script creates a temporary working directory next to where you run it and removes it afterwards by default.
          </p>
          <div class="ts-code-block" style="position:relative; background:var(--bg); border:1px solid var(--border); border-radius:8px; padding:var(--space-3); margin:0 0 var(--space-3); font-family:monospace; font-size:13px; overflow-x:auto;">
            <code>curl -fsSL https://raw.githubusercontent.com/brandonhinds/tempus/refs/heads/main/scripts/update-tempus.sh -o update-tempus.sh &amp;&amp; \<br>chmod +x update-tempus.sh &amp;&amp; \<br>./update-tempus.sh --script-id <span id="script-id-update" style="color:var(--muted);">[Your Script ID]</span></code>
            <button class="ts-copy-btn" style="position:absolute; top:8px; right:8px;">Copy</button>
          </div>
          <div class="ts-note" style="margin:var(--space-3) 0 0; opacity:1;">
            Need to inspect the generated files? Re-run the script with <code>--keep</code> or supply your own folder with <code>--clone-dir &lt;path&gt;</code> to keep the workspace.
          </div>
        </div>

        <div class="ts-note" style="margin:var(--space-3) 0 0; opacity:1;">
          <strong>Note:</strong> After running <code>clasp push</code>, refresh your Tempus web app to see the changes. You may need to hard refresh (Ctrl+Shift+R or Cmd+Shift+R) to clear cached files.
        </div>
      </div>

      <div style="height:1px; background:var(--border); margin:var(--space-5) 0;"></div>

      <!-- About Section -->
      <div style="margin-bottom:var(--space-5);">
        <h3 style="margin:0 0 var(--space-3);">About</h3>
        <div style="display:flex; flex-direction:column; gap:var(--space-2);">
          <div style="display:flex; gap:var(--space-2);">
            <strong style="min-width:100px;">Created by:</strong>
            <span>Brandon Hinds</span>
          </div>
          <div style="display:flex; gap:var(--space-2);">
            <strong style="min-width:100px;">License:</strong>
            <span>MIT License</span>
          </div>
          <div style="display:flex; gap:var(--space-2);">
            <strong style="min-width:100px;">Version:</strong>
            <span>
              <span id="about-version-display">Loading...</span>
              <span id="about-version-status" style="margin-left:var(--space-2); color:var(--muted);">Checking...</span>
            </span>
          </div>
        </div>
        <p style="margin:var(--space-3) 0 0; color:var(--text); line-height:1.6;">
          Tempus is open source software released under the MIT License. You are free to use, modify, and distribute this software.
        </p>
      </div>

      <div style="height:1px; background:var(--border); margin:var(--space-5) 0;"></div>

      <!-- Links Section -->
      <div style="margin-bottom:var(--space-5);">
        <h3 style="margin:0 0 var(--space-3);">Links</h3>
        <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:var(--space-3);">
          <!-- GitHub Card -->
          <a href="https://github.com/brandonhinds/tempus" target="_blank" rel="noopener noreferrer" style="display:flex; flex-direction:column; background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:var(--space-4); text-decoration:none; color:var(--text); transition:all 0.2s ease;">
            <div style="display:flex; align-items:center; gap:var(--space-2); margin-bottom:var(--space-2);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="opacity:0.9; flex-shrink:0;">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
              <strong style="font-size:16px; line-height:1.2;">View on GitHub</strong>
            </div>
            <p class="ts-note" style="margin:0; opacity:1;">
              Source code, issues, and contributions
            </p>
          </a>

          <!-- Ko-fi Card -->
          <a href="https://ko-fi.com/brandonhinds" target="_blank" rel="noopener noreferrer" style="display:flex; flex-direction:column; background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:var(--space-4); text-decoration:none; color:var(--text); transition:all 0.2s ease;">
            <div style="display:flex; align-items:center; gap:var(--space-2); margin-bottom:var(--space-2);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="opacity:0.9; flex-shrink:0;">
                <path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.034-3.954-.709-.965-1.041-2.7-.091-3.71.951-1.01 3.005-1.086 4.363.407 0 0 1.565-1.782 3.468-.963 1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z"/>
              </svg>
              <strong style="font-size:16px; line-height:1.2;">Support on Ko-fi</strong>
            </div>
            <p class="ts-note" style="margin:0; opacity:1;">
              Support continued development
            </p>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
