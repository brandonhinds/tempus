<section class="ts-card" id="page-time" style="margin-bottom:16px;">
  <div class="ts-tabs">
    <div class="ts-tab active" data-tab="manual">Basic</div>
    <div class="ts-tab" data-tab="punch">Advanced</div>
  </div>

  <div id="tab-manual">
    <div class="ts-row">
      <div class="ts-col"><label>Date</label><input type="date" id="manual-date" /></div>
      <div class="ts-col" id="manual-hour-type-col" style="display:none;">
        <label>Hour Type</label>
        <select id="manual-hour-type"></select>
      </div>
      <div class="ts-col">
        <label>Contract</label>
        <select id="manual-contract"></select>
        <div class="ts-warning" id="manual-contract-warning" style="display:none;">No valid contract for this date. Add one on the Contracts page before logging time.</div>
      </div>
    </div>
    <div class="ts-row" style="margin-top:8px;">
      <div class="ts-col">
        <label>Total hours</label>
        <input type="number" id="manual-hours" min="0" step="0.01" placeholder="" />
      </div>
      <div class="ts-col" style="display:flex; align-items:flex-end;">
        <div class="ts-note">Totals are rounded using your settings.</div>
      </div>
    </div>
    <div style="margin-top:8px; display:flex; justify-content:space-between; align-items:center;">
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-create-manual-default" style="display:none;">Create Default</button>
        <button class="ghost" id="btn-enter-manual-default" style="display:none;">Enter Default</button>
        <button class="ghost" id="btn-edit-manual-defaults" style="display:none;">Edit Defaults</button>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-cancel-edit" style="display:none;">Cancel Edit</button>
        <button class="ghost" id="btn-delete-manual" style="display:none;">Delete Entry</button>
        <button id="btn-add-manual">Add Entry</button>
      </div>
    </div>
  </div>

  <div id="tab-punch" style="display:none;">
    <div class="ts-row">
      <div class="ts-col"><label>Date</label><input type="date" id="punch-date" /></div>
      <div class="ts-col" id="punch-hour-type-col" style="display:none;">
        <label>Hour Type</label>
        <select id="punch-hour-type"></select>
      </div>
      <div class="ts-col">
        <label>Contract</label>
        <select id="punch-contract"></select>
        <div class="ts-warning" id="punch-contract-warning" style="display:none;">No valid contract for this date. Add one on the Contracts page before logging time.</div>
      </div>
    </div>
        <div style="margin-top:8px; display:flex; flex-wrap:wrap; gap:8px;">
          <button id="btn-punch-toggle">Punch In</button>
        </div>
    <div class="ts-note" id="punch-summary" style="margin-top:8px;"></div>
    <div class="ts-warning" id="punch-open-warning" style="display:none; margin-top:4px;"></div>
    <div id="punch-range-list" class="ts-punch-list"></div>
    <div style="margin-top:8px; display:flex; justify-content:space-between; align-items:center;">
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-create-punch-default" style="display:none;">Create Default</button>
        <button class="ghost" id="btn-enter-punch-default" style="display:none;">Enter Default</button>
        <button class="ghost" id="btn-edit-punch-defaults" style="display:none;">Edit Defaults</button>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-punch-cancel" style="display:none;">Discard Changes</button>
        <button class="ghost" id="btn-delete-punch" style="display:none;">Delete Entry</button>
        <button id="btn-punch-save">Add Entry</button>
      </div>
    </div>
  </div>

  <div class="ts-calendar" id="calendar-section">
    <div class="ts-calendar-header">
      <div style="display:flex; align-items:center; gap:16px;">
        <h3 style="margin:0;">Calendar</h3>
        <div class="ts-badge" id="calendar-month-total">Total hours: 0</div>
        <button class="ts-badge ts-income-badge" id="calendar-net-income" type="button" aria-expanded="false">Net income: --</button>
      </div>
      <div style="display:flex; align-items:center; gap:12px;">
        <button class="ghost" id="calendar-filter-toggle" style="display:none;" title="Filter hour types">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M1 3h14M3 8h10M5 13h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="ts-calendar-nav">
          <button class="ghost" id="calendar-prev" title="Previous Month">◀</button>
          <div id="calendar-label" style="min-width:140px; text-align:center;"></div>
          <button class="ghost" id="calendar-next" title="Next Month">▶</button>
        </div>
      </div>
    </div>
    <div class="ts-calendar-filter-panel" id="calendar-filter-panel" style="display:none;">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:600;">Filter Hour Types</span>
        <div style="display:flex; gap:8px;">
          <button class="ghost" id="filter-select-all" style="font-size:12px; padding:4px 8px;">All</button>
          <button class="ghost" id="filter-select-none" style="font-size:12px; padding:4px 8px;">None</button>
          <button class="ghost" id="filter-select-income" style="font-size:12px; padding:4px 8px;">Income Only</button>
        </div>
      </div>
      <div id="calendar-filter-list" class="ts-calendar-filter-list"></div>
    </div>
    <div class="ts-income-breakdown" id="income-breakdown" hidden>
      <div class="ts-income-row"><span class="ts-income-row-label">Total package</span><span class="ts-income-row-value" id="income-total-package">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Gross income</span><span class="ts-income-row-value" id="income-gross">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Superannuation guarantee</span><span class="ts-income-row-value" id="income-super-guarantee">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Extra super contributions</span><span class="ts-income-row-value" id="income-extra-super">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Other deductions</span><span class="ts-income-row-value" id="income-other-deductions">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Taxable income</span><span class="ts-income-row-value" id="income-taxable">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Tax</span><span class="ts-income-row-value" id="income-tax">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Net income</span><span class="ts-income-row-value" id="income-net">--</span></div>
    </div>
    <div class="ts-calendar-grid" id="calendar-weekdays">
      <div class="ts-calendar-weekday">Mon</div>
      <div class="ts-calendar-weekday">Tue</div>
      <div class="ts-calendar-weekday">Wed</div>
      <div class="ts-calendar-weekday">Thu</div>
      <div class="ts-calendar-weekday">Fri</div>
      <div class="ts-calendar-weekday">Sat</div>
      <div class="ts-calendar-weekday">Sun</div>
    </div>
    <div class="ts-calendar-grid" id="calendar-grid"></div>
    <div class="ts-note" style="margin-top:6px;">Click a day to add or edit entries.</div>
  </div>
</section>

<!-- Default Entry Modals -->
<div class="ts-modal" id="modal-create-default" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Create Default Entry</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-row">
        <div class="ts-col">
          <label>Default Name</label>
          <input type="text" id="default-name" placeholder="e.g., Regular Day, Split Day" />
        </div>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-create-default">Cancel</button>
      <button id="btn-save-default">Save Default</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-select-default" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Select Default Entry</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="default-selection-list" class="ts-default-list"></div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-select-default">Cancel</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-edit-defaults" style="display:none;">
  <div class="ts-modal-content" style="max-width: 600px;">
    <div class="ts-modal-header">
      <h3>Edit Defaults</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="edit-defaults-list" class="ts-edit-defaults-list"></div>
      <div class="ts-note" style="margin-top:16px;">Click on a default to edit its details, or use the delete button to remove it.</div>
    </div>
    <div class="ts-modal-footer">
      <button id="btn-close-edit-defaults">Close</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-edit-default-details" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Edit Default Details</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-row">
        <div class="ts-col">
          <label>Default Name</label>
          <input type="text" id="edit-default-name" />
        </div>
      </div>
      <div id="edit-default-form" style="margin-top:16px;">
        <!-- Dynamic content based on default type -->
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-edit-default-details">Cancel</button>
      <button id="btn-save-default-details">Save Changes</button>
    </div>
  </div>
</div>
