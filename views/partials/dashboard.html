<section class="ts-card" id="page-time" style="margin-bottom:16px;">
  <div class="ts-tabs">
    <div class="ts-tab active" data-tab="manual">Basic</div>
    <div class="ts-tab" data-tab="punch">Advanced</div>
  </div>

  <div id="tab-manual">
    <div class="ts-row">
      <div class="ts-col"><label>Date</label><input type="date" id="manual-date" /></div>
      <div class="ts-col" id="manual-hour-type-col" style="display:none;">
        <label>Hour Type</label>
        <select id="manual-hour-type"></select>
      </div>
      <div class="ts-col">
        <label>Contract</label>
        <select id="manual-contract"></select>
        <div class="ts-warning" id="manual-contract-warning" style="display:none;">No valid contract for this date. Add one on the Contracts page before logging time.</div>
      </div>
    </div>
    <div class="ts-row" style="margin-top:8px;">
      <div class="ts-col">
        <label>Total hours</label>
        <input type="number" id="manual-hours" min="0" step="0.01" placeholder="" />
      </div>
      <div class="ts-col"></div>
      <div class="ts-col"></div>
    </div>
    <div style="margin-top:8px; display:flex; justify-content:space-between; align-items:center;">
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-create-manual-default" style="display:none;">Create Default</button>
        <button class="ghost" id="btn-enter-manual-default" style="display:none;">Enter Default</button>
        <button class="ghost" id="btn-edit-manual-defaults" style="display:none;">Edit Defaults</button>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-cancel-edit" style="display:none;">Cancel Edit</button>
        <button class="ghost" id="btn-delete-manual" style="display:none;">Delete Entry</button>
        <button id="btn-add-manual">Add Entry</button>
      </div>
    </div>
  </div>

  <div id="tab-punch" style="display:none;">
    <div class="ts-row">
      <div class="ts-col"><label>Date</label><input type="date" id="punch-date" /></div>
      <div class="ts-col" id="punch-hour-type-col" style="display:none;">
        <label>Hour Type</label>
        <select id="punch-hour-type"></select>
      </div>
      <div class="ts-col">
        <label>Contract</label>
        <select id="punch-contract"></select>
        <div class="ts-warning" id="punch-contract-warning" style="display:none;">No valid contract for this date. Add one on the Contracts page before logging time.</div>
      </div>
    </div>
        <div style="margin-top:8px; display:flex; flex-wrap:wrap; gap:8px;">
          <button id="btn-punch-toggle">Punch In</button>
        </div>
    <div class="ts-note" id="punch-summary" style="margin-top:8px;"></div>
    <div class="ts-warning" id="punch-open-warning" style="display:none; margin-top:4px;"></div>
    <div class="ts-note" id="punch-suggestion" style="display:none; margin-top:4px; color: var(--success);"></div>
    <div id="punch-range-list" class="ts-punch-list"></div>
    <div style="margin-top:8px; display:flex; justify-content:space-between; align-items:center;">
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-create-punch-default" style="display:none;">Create Default</button>
        <button class="ghost" id="btn-enter-punch-default" style="display:none;">Enter Default</button>
        <button class="ghost" id="btn-edit-punch-defaults" style="display:none;">Edit Defaults</button>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="ghost" id="btn-punch-cancel" style="display:none;">Discard Changes</button>
        <button class="ghost" id="btn-delete-punch" style="display:none;">Delete Entry</button>
        <button id="btn-punch-save">Add Entry</button>
      </div>
    </div>
  </div>

  <div class="ts-calendar" id="calendar-section">
    <div class="ts-calendar-header">
      <div style="display:flex; align-items:center; gap:16px;">
        <h3 style="margin:0;">Calendar</h3>
        <button class="ts-badge ts-hour-types-badge" id="calendar-month-total" type="button" aria-expanded="false">Total hours: 0</button>
        <button class="ts-badge ts-income-badge" id="calendar-net-income" type="button" aria-expanded="false">Net income: --</button>
        <button class="ts-badge ts-expected-badge" id="calendar-expected-hours" type="button" aria-expanded="false" style="display:none;">Projected variance: --</button>
      </div>
      <div style="display:flex; align-items:center; gap:12px;">
        <button class="ghost" id="calendar-filter-toggle" style="display:none;" title="Filter hour types">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M1 3h14M3 8h10M5 13h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </button>
        <div class="ts-calendar-nav">
          <button class="ghost" id="calendar-prev" title="Previous Month">◀</button>
          <button class="ghost" id="calendar-jump" title="Jump to Month" style="min-width:140px; text-align:center; padding:10px 14px;">
            <div id="calendar-label"></div>
          </button>
          <button class="ghost" id="calendar-next" title="Next Month">▶</button>
        </div>
      </div>
    </div>
    <div class="ts-calendar-filter-panel" id="calendar-filter-panel" style="display:none;">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <span style="font-weight:600;">Filter Hour Types</span>
        <div style="display:flex; gap:8px;">
          <button class="ghost" id="filter-select-all" style="font-size:12px; padding:4px 8px;">All</button>
          <button class="ghost" id="filter-select-none" style="font-size:12px; padding:4px 8px;">None</button>
          <button class="ghost" id="filter-select-income" style="font-size:12px; padding:4px 8px;">Income Only</button>
        </div>
      </div>
      <div id="calendar-filter-list" class="ts-calendar-filter-list"></div>
    </div>
    <div class="ts-hour-types-breakdown" id="hour-types-breakdown" hidden>
      <div id="hour-types-breakdown-list"></div>
    </div>
    <div class="ts-income-breakdown" id="income-breakdown" hidden>
      <div class="ts-income-row" id="income-invoice-total-row" hidden>
        <span class="ts-income-row-label">Invoice total</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-invoice-total">--</span>
      </div>
      <div class="ts-income-row" id="income-company-income-row" hidden>
        <span class="ts-income-row-label">Company income</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-company-income">--</span>
      </div>
      <div class="ts-income-row" id="income-company-expenses-row" hidden>
        <span class="ts-income-row-label">Company expenses</span>
        <span class="ts-income-row-actual"><button class="ghost small" id="btn-company-expenses-details" style="font-size:11px; padding:2px 8px;">Click for details</button></span>
        <span class="ts-income-row-est" id="income-company-expenses">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Gross income</span>
        <span class="ts-income-row-actual" id="income-actual-gross-value"></span>
        <span class="ts-income-row-est" id="income-gross">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Superannuation guarantee</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-super-guarantee">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Extra super contributions</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-extra-super">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Superannuation total</span>
        <span class="ts-income-row-actual" id="income-actual-super-value"></span>
        <span class="ts-income-row-est" id="income-super-total">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Pre-tax deductions</span>
        <span class="ts-income-row-actual"><button class="ghost small" id="btn-deductions-details" style="font-size:11px; padding:2px 8px;">Click for details</button></span>
        <span class="ts-income-row-est" id="income-other-deductions">--</span>
      </div>
      <div class="ts-income-row" id="income-super-lost-row" hidden>
        <span class="ts-income-row-label">Super lost due to deductions</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-super-lost">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Taxable income</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-taxable">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Tax</span>
        <span class="ts-income-row-actual" id="income-actual-tax-value"></span>
        <span class="ts-income-row-est" id="income-tax">--</span>
      </div>
      <div class="ts-income-row">
        <span class="ts-income-row-label">Net income</span>
        <span class="ts-income-row-actual" id="income-actual-net-value"></span>
        <span class="ts-income-row-est" id="income-net">--</span>
      </div>
      <div id="hourly-rate-divider" class="ts-income-divider" hidden></div>
      <div class="ts-income-row" id="hourly-rate-gross-row" hidden>
        <span class="ts-income-row-label">Gross income hourly rate based on <span id="hourly-rate-gross-label">--</span>:</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-hourly-rate-gross">--</span>
      </div>
      <div class="ts-income-row" id="hourly-rate-net-row" hidden>
        <span class="ts-income-row-label">Net income hourly rate based on <span id="hourly-rate-net-label">--</span>:</span>
        <span class="ts-income-row-actual"></span>
        <span class="ts-income-row-est" id="income-hourly-rate-net">--</span>
      </div>
    </div>
    <div class="ts-expected-breakdown" id="expected-hours-breakdown" hidden>
      <div id="expected-hours-content"></div>
    </div>
    <div class="ts-calendar-grid" id="calendar-weekdays">
      <div class="ts-calendar-weekday">Mon</div>
      <div class="ts-calendar-weekday">Tue</div>
      <div class="ts-calendar-weekday">Wed</div>
      <div class="ts-calendar-weekday">Thu</div>
      <div class="ts-calendar-weekday">Fri</div>
      <div class="ts-calendar-weekday">Sat</div>
      <div class="ts-calendar-weekday">Sun</div>
    </div>
    <div class="ts-calendar-grid" id="calendar-grid"></div>
    <div class="ts-note" style="margin-top:6px;">Click a day to add or edit entries.</div>
    <div class="ts-payroll-helper-actions" id="payroll-helper-actions" style="display:flex; gap:8px; margin-top:12px; flex-wrap:wrap;">
      <button class="ghost" id="calendar-xero-helper" type="button" style="display:none;">Xero Payroll Helper</button>
      <button class="ghost" id="calendar-myob-helper" type="button" style="display:none;">MYOB Payroll Helper</button>
      <button class="ghost" id="calendar-actual-income-btn" type="button" style="display:none;">Add Actual Income</button>
      <button class="ghost" id="calendar-print-monthly-btn" type="button" style="display:none;">Print Monthly Hours</button>
    </div>
  </div>
</section>

<!-- Actual Income Modal -->
<div class="ts-modal" id="modal-actual-income" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3 id="actual-income-title">Add Actual Income</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div style="text-align:center; font-size:18px; font-weight:600; margin-bottom:16px; padding:12px; background:var(--bg); border-radius:8px;" id="actual-income-month-display">
        October 2025
      </div>
      <input type="hidden" id="actual-income-month" />
      <div class="ts-row" style="margin-top:12px;">
        <div class="ts-col">
          <label>Gross Income</label>
          <input type="number" id="actual-income-gross" min="0" step="0.01" placeholder="0.00" />
        </div>
        <div class="ts-col">
          <label>Superannuation</label>
          <input type="number" id="actual-income-super" min="0" step="0.01" placeholder="0.00" />
        </div>
      </div>
      <div class="ts-row" style="margin-top:12px;">
        <div class="ts-col">
          <label>Tax</label>
          <input type="number" id="actual-income-tax" min="0" step="0.01" placeholder="0.00" />
        </div>
        <div class="ts-col">
          <label>Net Income</label>
          <input type="number" id="actual-income-net" min="0" step="0.01" placeholder="0.00" />
        </div>
      </div>
      <div class="ts-note" style="margin-top:12px;">Enter the actual amounts from your payslip or bank statement. This allows comparison with the estimated values calculated by the app.</div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-delete-actual-income" style="display:none; margin-right:auto;">Delete</button>
      <button class="ghost" id="btn-cancel-actual-income">Cancel</button>
      <button id="btn-save-actual-income">Save</button>
    </div>
  </div>
</div>

<!-- Payroll Helper Modals -->
<div class="ts-modal" id="modal-xero-helper" style="display:none;">
  <div class="ts-modal-content" style="max-width: 720px;">
    <div class="ts-modal-header">
      <h3>Xero Payroll Helper</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="xero-helper-content"></div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-close-xero-helper">Close</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-myob-helper" style="display:none;">
  <div class="ts-modal-content" style="max-width: 720px;">
    <div class="ts-modal-header">
      <h3>MYOB Payroll Helper</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="myob-helper-content"></div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-close-myob-helper">Close</button>
    </div>
  </div>
</div>

<!-- Monthly Deductions Details Modal -->
<div class="ts-modal" id="modal-monthly-deductions" style="display:none;">
  <div class="ts-modal-content" style="max-width:720px;">
    <div class="ts-modal-header">
      <h3 id="monthly-deductions-title">Monthly Deductions</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="monthly-deductions-content"></div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-close-monthly-deductions">Close</button>
    </div>
  </div>
</div>

<!-- Adjust Occurrence Modal -->
<div class="ts-modal" id="modal-adjust-occurrence" style="display:none;">
  <div class="ts-modal-content" style="max-width:500px;">
    <div class="ts-modal-header">
      <h3>Adjust Occurrence</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-note" style="margin-bottom:16px;">
        <strong id="adjust-deduction-name"></strong><br>
        Original: <span id="adjust-original-date"></span> - <span id="adjust-original-amount"></span>
      </div>

      <div style="margin-bottom:16px;">
        <label for="adjust-new-date" style="display:block; margin-bottom:4px;">Move to different date (optional)</label>
        <input type="date" id="adjust-new-date" style="width:100%;">
      </div>

      <div style="margin-bottom:16px;">
        <label for="adjust-new-amount" style="display:block; margin-bottom:4px;">Adjust amount (optional)</label>
        <input type="number" id="adjust-new-amount" step="0.01" min="0" style="width:100%;">
      </div>

      <div style="margin-bottom:16px;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
          <input type="checkbox" id="adjust-skip">
          <span>Skip this occurrence</span>
        </label>
        <div class="ts-note" style="margin-top:4px;">When checked, date and amount fields are ignored</div>
      </div>

      <div>
        <label for="adjust-notes" style="display:block; margin-bottom:4px;">Notes (optional)</label>
        <textarea id="adjust-notes" rows="2" style="width:100%;"></textarea>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-delete-exception" style="display:none; margin-right:auto;">Remove Adjustment</button>
      <button class="ghost" id="btn-cancel-adjust">Cancel</button>
      <button id="btn-save-exception">Save Adjustment</button>
    </div>
  </div>
</div>

<!-- Default Entry Modals -->
<div class="ts-modal" id="modal-create-default" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Create Default Entry</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-row">
        <div class="ts-col">
          <label>Default Name</label>
          <input type="text" id="default-name" placeholder="e.g., Regular Day, Split Day" />
        </div>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-create-default">Cancel</button>
      <button id="btn-save-default">Save Default</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-select-default" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Select Default Entry</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="default-selection-list" class="ts-default-list"></div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-select-default">Cancel</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-edit-defaults" style="display:none;">
  <div class="ts-modal-content" style="max-width: 600px;">
    <div class="ts-modal-header">
      <h3>Edit Defaults</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div id="edit-defaults-list" class="ts-edit-defaults-list"></div>
      <div class="ts-note" style="margin-top:16px;">Click on a default to edit its details, or use the delete button to remove it.</div>
    </div>
    <div class="ts-modal-footer">
      <button id="btn-close-edit-defaults">Close</button>
    </div>
  </div>
</div>

<div class="ts-modal" id="modal-edit-default-details" style="display:none;">
  <div class="ts-modal-content">
    <div class="ts-modal-header">
      <h3>Edit Default Details</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-row">
        <div class="ts-col">
          <label>Default Name</label>
          <input type="text" id="edit-default-name" />
        </div>
      </div>
      <div id="edit-default-form" style="margin-top:16px;">
        <!-- Dynamic content based on default type -->
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-edit-default-details">Cancel</button>
      <button id="btn-save-default-details">Save Changes</button>
    </div>
  </div>
</div>

<!-- Reusable Confirm Modal -->
<div class="ts-modal" id="modal-confirm" style="display:none;">
  <div class="ts-modal-content" style="max-width: 480px;">
    <div class="ts-modal-header">
      <h3 id="confirm-title">Confirm</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <p id="confirm-message" style="margin:0;"></p>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-confirm-cancel">Cancel</button>
      <button id="btn-confirm-ok">OK</button>
    </div>
  </div>
</div>

<!-- Reusable Alert Modal -->
<div class="ts-modal" id="modal-alert" style="display:none;">
  <div class="ts-modal-content" style="max-width: 480px;">
    <div class="ts-modal-header">
      <h3 id="alert-title">Notice</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <p id="alert-message" style="margin:0;"></p>
    </div>
    <div class="ts-modal-footer">
      <button id="btn-alert-ok">OK</button>
    </div>
  </div>
</div>

<!-- BAS Detail Modal -->
<div class="ts-modal" id="modal-bas-detail" style="display:none;">
  <div class="ts-modal-content" style="max-width: 680px;">
    <div class="ts-modal-header">
      <h3 id="bas-detail-title">BAS Details</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <p class="ts-note" style="margin:0 0 16px 0;">Click any field to copy its value to the clipboard</p>

      <div style="margin-bottom:24px;">
        <h4 style="margin:0 0 12px 0; font-size:15px; font-weight:600;">Goods and Services Tax (GST)</h4>
        <div style="display:flex; flex-direction:column; gap:12px;">
          <div class="bas-field-row">
            <label class="bas-field-label">G1 - Total Sales</label>
            <div class="bas-field-value" id="bas-g1-value" data-field="g1" title="Click to copy">$0.00</div>
          </div>
          <div class="bas-field-row">
            <label class="bas-field-label" style="padding-left:20px;">Does this include GST?</label>
            <div class="bas-field-value" id="bas-g1-gst" data-field="g1_gst">Yes</div>
          </div>
          <div class="bas-field-row">
            <label class="bas-field-label">1A - GST on Sales</label>
            <div class="bas-field-value" id="bas-1a-value" data-field="1a" title="Click to copy">$0.00</div>
          </div>
          <div class="bas-field-row">
            <label class="bas-field-label">1B - GST on Purchases</label>
            <div class="bas-field-value" id="bas-1b-value" data-field="1b" title="Click to copy">$0.00</div>
          </div>
        </div>
      </div>

      <div style="margin-bottom:24px;">
        <h4 style="margin:0 0 12px 0; font-size:15px; font-weight:600;">PAYG Income Tax Instalment</h4>
        <p class="ts-note" style="margin:0 0 12px 0; font-size:12px;">Calculate PAYG instalment using income times rate</p>
        <div style="display:flex; flex-direction:column; gap:12px;">
          <div class="bas-field-row">
            <label class="bas-field-label">T1 - PAYG Instalment Income</label>
            <div class="bas-field-value" id="bas-t1-value" data-field="t1" title="Click to copy">$0.00</div>
          </div>
          <div class="bas-field-row">
            <label class="bas-field-label">T2 - Instalment Rate (%)</label>
            <div class="bas-field-value" id="bas-t2-value" data-field="t2" title="Click to copy">0.00%</div>
          </div>
        </div>
      </div>

      <div style="display:flex; align-items:center; justify-content:center; padding:16px; background:var(--panel); border-radius:8px; border:1px solid var(--border);">
        <label style="display:flex; align-items:center; gap:12px; cursor:pointer; user-select:none;">
          <input type="checkbox" id="bas-submitted-toggle" style="width:18px; height:18px; cursor:pointer;">
          <span style="font-weight:600;">BAS Submitted for this period</span>
        </label>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-bas-detail-close">Close</button>
      <button id="btn-bas-detail-save">Save</button>
    </div>
  </div>
</div>

<style>
.bas-field-row {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 16px;
  align-items: center;
}

.bas-field-label {
  font-size: 13px;
  color: var(--muted);
}

.bas-field-value {
  font-size: 15px;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  padding: 8px 12px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: right;
}

.bas-field-value:hover {
  background: var(--bg);
  border-color: var(--primary);
}

.bas-field-value:active {
  transform: scale(0.98);
}

.bas-field-value.copied {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}
</style>

<!-- Month Picker Modal -->
<div class="ts-modal" id="modal-month-picker" style="display:none;">
  <div class="ts-modal-content" style="max-width: 420px;">
    <div class="ts-modal-header">
      <h3>Jump to Month</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
        <button class="ghost" id="month-picker-year-prev">◀</button>
        <div id="month-picker-year-display" style="font-size:18px; font-weight:600;">2025</div>
        <button class="ghost" id="month-picker-year-next">▶</button>
      </div>

      <div class="month-picker-grid" id="month-picker-grid">
        <!-- Months will be generated by JavaScript -->
      </div>
    </div>
  </div>
</div>

<style>
.month-picker-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.month-picker-cell {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-weight: 500;
  font-size: 14px;
}

.month-picker-cell:hover {
  border-color: var(--primary);
  transform: translateY(-1px);
}

.month-picker-cell.active {
  background: var(--primary-soft-bg);
  border-color: var(--primary);
  color: var(--primary-soft-text);
}

.month-picker-cell.current-month {
  border-color: var(--muted);
  opacity: 0.7;
}
</style>

<!-- Monthly Print View Modal -->
<div class="ts-modal" id="modal-print-view-config" style="display:none;">
  <div class="ts-modal-content" style="max-width: 540px;">
    <div class="ts-modal-header">
      <h3>Select Hour Types for Print View</h3>
      <button class="ts-modal-close">&times;</button>
    </div>
    <div class="ts-modal-body">
      <div class="ts-note" style="margin-bottom:16px;">
        Select which hour types to include in the print view. Exactly 1 income hour type and maximum 2 non-income hour types allowed to ensure the page fits on one A4 sheet.
      </div>
      <div id="print-view-income-types" style="margin-bottom:16px;">
        <h4 style="margin:0 0 8px 0; font-size:13px; font-weight:600; color:var(--muted);">Income-Generating Hours</h4>
        <div id="print-view-income-list" style="display:flex; flex-direction:column; gap:4px;">
          <!-- Populated by JavaScript -->
        </div>
      </div>
      <div id="print-view-other-types">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
          <h4 style="margin:0; font-size:13px; font-weight:600; color:var(--muted);">Other Hour Types</h4>
          <button class="ghost" id="btn-unselect-all-other" style="font-size:12px; padding:4px 8px;">Unselect all</button>
        </div>
        <div id="print-view-other-list" style="display:flex; flex-direction:column; gap:4px;">
          <!-- Populated by JavaScript -->
        </div>
      </div>
      <div class="ts-warning" id="print-view-warning" style="display:none; margin-top:12px;">
        <span id="print-view-warning-text"></span>
      </div>
    </div>
    <div class="ts-modal-footer">
      <button class="ghost" id="btn-cancel-print-view">Cancel</button>
      <button id="btn-generate-print-view">Generate Print View</button>
    </div>
  </div>
</div>
