<section class="ts-card" id="page-time" style="margin-bottom:16px;">
  <div class="ts-tabs">
    <div class="ts-tab active" data-tab="manual">✏️ Manual Entry</div>
    <div class="ts-tab" data-tab="timer">⏱️ Timer</div>
  </div>

  <div id="tab-manual">
    <div class="ts-row">
      <div class="ts-col"><label>Date</label><input type="date" id="manual-date" /></div>
      <div class="ts-col">
        <label>Contract</label>
        <select id="manual-contract"></select>
        <div class="ts-warning" id="manual-contract-warning" style="display:none;">No valid contract for this date. Add one on the Contracts page before logging time.</div>
      </div>
    </div>
    <div class="ts-row" style="margin-top:8px;">
      <div class="ts-col"><label>Start Time</label><input type="time" id="manual-start" required /></div>
      <div class="ts-col"><label>End Time</label><input type="time" id="manual-end" required /></div>
      <div class="ts-col"><label>Break (minutes)</label><input type="number" id="manual-break" min="0" step="1" value="0" /></div>
    </div>
    <div style="margin-top:8px; display:flex; justify-content:flex-end; gap:8px;">
      <button class="ghost" id="btn-cancel-edit" style="display:none;">Cancel Edit</button>
      <button id="btn-add-manual">Add Entry</button>
    </div>
  </div>

  <div id="tab-timer" style="display:none;">
    <div class="ts-row">
      <div class="ts-col">
        <div style="font-size:64px; font-family:monospace;" id="timer-display">0:00</div>
        <div class="ts-row">
          <button id="btn-start">Start</button>
          <button id="btn-pause" class="secondary">Pause</button>
          <button id="btn-stop" class="danger">Stop & Save</button>
          <button id="btn-reset" class="secondary">Reset</button>
        </div>
        <div class="ts-note" style="margin-top:8px;">Timer must run &ge; 1 minute to save.</div>
      </div>
      <div class="ts-col">
        <label>Break (minutes)</label>
        <input type="number" id="timer-break" min="0" step="1" value="0" />
        <label style="margin-top:8px; display:block;">Contract</label>
        <select id="timer-contract"></select>
        <div class="ts-warning" id="timer-contract-warning" style="display:none;">Add a valid contract for today on the Contracts page before using the timer.</div>
      </div>
    </div>
  </div>

  <div class="ts-calendar" id="calendar-section">
    <div class="ts-calendar-header">
      <div style="display:flex; align-items:center; gap:16px;">
        <h3 style="margin:0;">Calendar</h3>
        <div class="ts-badge" id="calendar-month-total">Total hours: 0</div>
        <button class="ts-badge ts-income-badge" id="calendar-net-income" type="button" aria-expanded="false">Net income: --</button>
      </div>
      <div class="ts-calendar-nav">
        <button class="ghost" id="calendar-prev" title="Previous Month">◀</button>
        <div id="calendar-label" style="min-width:140px; text-align:center;"></div>
        <button class="ghost" id="calendar-next" title="Next Month">▶</button>
      </div>
    </div>
    <div class="ts-income-breakdown" id="income-breakdown" hidden>
      <div class="ts-income-row"><span class="ts-income-row-label">Total package</span><span class="ts-income-row-value" id="income-total-package">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Gross income</span><span class="ts-income-row-value" id="income-gross">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Superannuation guarantee</span><span class="ts-income-row-value" id="income-super-guarantee">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Extra super contributions</span><span class="ts-income-row-value" id="income-extra-super">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Other deductions</span><span class="ts-income-row-value" id="income-other-deductions">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Taxable income</span><span class="ts-income-row-value" id="income-taxable">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Tax</span><span class="ts-income-row-value" id="income-tax">--</span></div>
      <div class="ts-income-row"><span class="ts-income-row-label">Net income</span><span class="ts-income-row-value" id="income-net">--</span></div>
    </div>
    <div class="ts-calendar-grid" id="calendar-weekdays">
      <div class="ts-calendar-weekday">Mon</div>
      <div class="ts-calendar-weekday">Tue</div>
      <div class="ts-calendar-weekday">Wed</div>
      <div class="ts-calendar-weekday">Thu</div>
      <div class="ts-calendar-weekday">Fri</div>
      <div class="ts-calendar-weekday">Sat</div>
      <div class="ts-calendar-weekday">Sun</div>
    </div>
    <div class="ts-calendar-grid" id="calendar-grid"></div>
    <div class="ts-note" style="margin-top:6px;">Click a day to review or edit entries.</div>
    <div class="ts-calendar-detail" id="calendar-detail">
      <div class="ts-calendar-detail-header">
        <div>
          <strong id="calendar-detail-date">Select a day</strong>
          <div class="ts-note" id="calendar-detail-total"></div>
        </div>
        <div>
          <button class="ghost" id="calendar-add-entry">New Entry</button>
        </div>
      </div>
      <div class="ts-calendar-detail-list" id="calendar-detail-list"></div>
    </div>
  </div>
</section>
